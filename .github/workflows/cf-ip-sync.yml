      - name: Setup WARP
        run: |
          wgcf register --accept-tos
          wgcf generate

          PRIVATE_KEY=$(grep PrivateKey wgcf-profile.conf | head -n1 | awk '{print $3}')
          PUBLIC_KEY=$(grep PublicKey wgcf-profile.conf | head -n1 | awk '{print $3}')

          cat > warp.conf <<'EOF'
[Interface]
PrivateKey = REPLACE_PRIVATE_KEY
Address = 172.16.0.2/32

[Peer]
PublicKey = REPLACE_PUBLIC_KEY
AllowedIPs = 0.0.0.0/0
Endpoint = engage.cloudflareclient.com:2408

[Socks5]
BindAddress = 127.0.0.1:40000
EOF

          sed -i "s/REPLACE_PRIVATE_KEY/$PRIVATE_KEY/" warp.conf
          sed -i "s/REPLACE_PUBLIC_KEY/$PUBLIC_KEY/" warp.conf

          nohup wireproxy -c warp.conf >/dev/null 2>&1 &
          sleep 5
